{# *********************************************************************************************************************
 * Projet: Phpmesure
 * Auteur: Tristan Fleury - tristan.fleury.gre@gmail.com
 * Année de production: 2017
 * Licence: GNU General Public License (GPL), version 3
 * Copyright © 2017 Tristan Fleury
 ********************************************************************************************************************* #}

{% extends 'viducphpmesureserveurBundle:Default:base.html.twig' %}

    

{% block body %} 
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <!-- entête de page  -->                   
    <div class="row">
        <div class="col-md-12">
            <h2>Application: {{application.application}}</h2>   
            <h5>Tableau de bord de l'application {{application.application}}</h5>
        </div>
    </div>              
    <!-- /entête de page  -->  

    {{ dump(listeMethode) }}
    
    <div class="row">
        <div class="col-md-6 col-sm-12 col-xs-12">           
            <div class="panel panel-back noti-box">
                <span class="icon-box bg-color-red set-icon">
                    <i class="fa fa-bar-chart-o"></i>
                </span>
                <div class="text-box" >
                    <p class="main-text">Utilisation</p>
                    <p class="text-muted">de xx a xx</p>
                </div>
                <div id="container" style="min-width: 310px; max-width: 800px; height: 400px; margin: 0 auto"></div>                         
            </div>    
        </div>   

        {% set tempArray = "" %}
        {% for key in listeMethode|keys %}
            {% set tempArray = tempArray~"'"~key~"'," %}
        {% endfor %}
        {{tempArray}}
    </div>
    
    <script type="text/javascript">
        
        Highcharts.chart('container', {
            chart: {
                type: 'bar'
            },
            title: {
                text: "Nombre d'utilisation des méthodes de l'application"
            },
        xAxis: {
            categories: [{{ tempArray }}],
            title: {
                text: null
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Utilisation ',
                align: 'high'
            },
            labels: {
                overflow: 'justify'
            }
        },
        tooltip: {
            valueSuffix: ''
        },
        plotOptions: {
            bar: {
                dataLabels: {
                    enabled: true
                }
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -40,
            y: 60,
            floating: true,
            borderWidth: 1,
            backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
            shadow: true
        },
        credits: {
            enabled: false
        },
    series: [{
        name: 'utilisation',
        data: [3, 5, 2]
    }]
});
    </script>
{% endblock %}

